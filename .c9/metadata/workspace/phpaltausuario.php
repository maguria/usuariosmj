{"filter":false,"title":"phpaltausuario.php","tooltip":"/phpaltausuario.php","undoManager":{"mark":10,"position":10,"stack":[[{"start":{"row":0,"column":0},"end":{"row":9,"column":0},"action":"remove","lines":["<?php","","","require 'clases/AutoCarga.php';","","$em=Request::post(\"email\");","$c1=Request::post(\"clave1\");","$c2=Request::post(\"clave2\");","",""],"id":1},{"start":{"row":0,"column":0},"end":{"row":40,"column":0},"action":"insert","lines":["<?php","","","require 'clases/AutoCarga.php';","","","$sesion= new Session();","$em=Request::post(\"email\");","$c1=Request::post(\"clave\");","$c2=Request::post(\"clave2\");","","if(Filter::isEmail($em)){","    if($c1==$c2){","        ","        $bd = new DataBase();","        $gestor = new ManageUsuario($bd);","        $fechaalta=date('Y-m-d');","        $alias=$em;","        $usuario=new Usuario($em,sha1($c1),$alias,$fechaalta);","        $rUsuario = $gestor->insert($usuario);","        $bd->close();","        ","        require_once 'clases/Google/autoload.php';","        require_once 'clases/class.phpmailer.php';","        ","      $secreto=sha1($em.Contants::SEMILLA);","      $mensaje=\"Confirme su registro pulsando el siguiente enlace: \".\"http://localhost/usuariosCorreo/oauth/activar.php?email=$em&secreto=$secreto\";","      $envio=new Email($em,'Active su cuenta',$mensaje);","","    header('Location:index.php?opUsuario=insert&rUsuario='.$rUsuario.'&envio='.$envio->send());","    }","    else{","        $c=-1;","        header('Location:index.php?c='.$c);","    } ","}","else{","   $c=-2;","   header('Location:index.php?c='.$c);","}",""]}],[{"start":{"row":3,"column":9},"end":{"row":3,"column":10},"action":"insert","lines":["."],"id":2}],[{"start":{"row":3,"column":10},"end":{"row":3,"column":11},"action":"insert","lines":["/"],"id":3}],[{"start":{"row":22,"column":22},"end":{"row":22,"column":23},"action":"insert","lines":["."],"id":4}],[{"start":{"row":22,"column":23},"end":{"row":22,"column":24},"action":"insert","lines":["/"],"id":5}],[{"start":{"row":23,"column":22},"end":{"row":23,"column":23},"action":"insert","lines":["."],"id":6}],[{"start":{"row":23,"column":23},"end":{"row":23,"column":24},"action":"insert","lines":["/"],"id":7}],[{"start":{"row":3,"column":10},"end":{"row":3,"column":11},"action":"remove","lines":["/"],"id":8}],[{"start":{"row":3,"column":9},"end":{"row":3,"column":10},"action":"remove","lines":["."],"id":9}],[{"start":{"row":14,"column":22},"end":{"row":14,"column":23},"action":"remove","lines":["B"],"id":10}],[{"start":{"row":14,"column":22},"end":{"row":14,"column":23},"action":"insert","lines":["b"],"id":11}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":14,"column":23},"end":{"row":14,"column":23},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1452343402514,"hash":"e08af2fbfa1211fbde30dda9c03db5db0c3431bc"}